import unittest
from creatures.genome import *
from creatures.creature import *
from world.map import *

class testMap(unittest.TestCase):
    def test(self):
        # make a map
        map = Map(20, 10)
        centerNode = map.nodes[105]
        neighbors = [neighbor.index for neighbor in centerNode.neighbors]
        self.assertTrue(neighbors == [104, 114, 115, 106, 95, 94])

        self.assertTrue(centerNode.x == 10 and centerNode.y == 5)
        nextNode=map.nodes[135]
        dist=Map.getDistance(centerNode, nextNode)
        self.assertTrue(dist == 3)
        fleePath=Map.findPathAway(nextNode, centerNode, safeDistance=7)
        self.assertTrue(Map.getDistance(centerNode, fleePath[-1])==7)

        # map.nodes[81].obstruction = 'something'
        map.nodes[82].obstruction = 'something'
        map.nodes[83].obstruction = 'something'
        map.nodes[84].obstruction = 'something'
        map.nodes[85].obstruction = 'something'
        map.nodes[86].obstruction = 'something'
        map.nodes[87].obstruction = 'something'
        path = Map.findPath(map.nodes[63], map.nodes[103])
        print ([node.index for node in path])
        self.assertTrue(len(path) == 6)

testMap().test()

#  ___     ___     ___     ___     ___     ___
# /   \___/   \___/   \___/   \___/   \___/   \___/
# \___/   \___/   \___/   \___/   \___/   \___/   \
# /   \___/   \___/   \___/   \___/   \___/   \___/
# \___/   \___/   \___/   \___/   \___/   \___/   \
# /   \___/   \___/   \___/   \___/   \___/   \___/
# \___/   \___/   \___/   \___/   \___/   \___/   \
# /   \___/   \___/   \___/   \___/   \___/   \___/
# \___/   \___/   \___/   \___/   \___/   \___/   \
# /   \___/   \___/   \___/   \___/   \___/   \___/
# \___/   \___/   \___/   \___/   \___/   \___/   \

# .       .       .       .       .       .       .
#     .       .       .       .       .       .
# .       .       .       .       .       .       .
#     .       .       .       .       .       .
# .       .       .       .       .       .       .
#     .       .       .       .       .       .
# .       .       .       .       .       .       .
#     .       .       .       .       .       .
# .       .       .       .       .       .       .
#     .       .       .       .       .       .    

#     ========    ========    ========    ========    ========    ========    ========    ========    ========    ========    ========    ====
#       ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ==
#       ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||
#     ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||
# ====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||
# ======||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||
# ======    ========    ========    ========    ========    ========    ========    ========    ========    ========    ========    ========
# ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ====
# ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||
# ||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||
# ||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||==
# ||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||||====
#     ========    ========    ========    ========    ========    ========    ========    ========    ========    ========    ========    ====
#       ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ==
#       ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||
#     ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||
# ====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||
# ======||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||
# ======    ========    ========    ========    ========    ========    ========    ========    ========    ========    ========    ========
# ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ====
# ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||
# ||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||
# ||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||==
# ||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||||====
#     ========    ========    ========    ========    ========    ========    ========    ========    ========    ========    ========    ====
#       ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ==
#       ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||||        ||
#     ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||||||    ||||
# ====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||||||====||||
# ======||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||||========||
# ======    ========    ========    ========    ========    ========    ========    ========    ========    ========    ========    ========
# ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ====        ====

#      █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████
#        █████         █████         █████         █████         █████         █████         █████         █████         █████         █████         █████         ███
#        |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||
#      |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||
# █████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||
# ███████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||
# ███████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████
# █████         █████         █████         █████         █████         █████         █████         █████         █████         █████         █████         █████
# |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||
# |||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||
# |||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||███
# |||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████
#      █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████
#        █████         █████         █████         █████         █████         █████         █████         █████         █████         █████         █████         ███
#        |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||
#      |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||
# █████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||
# ███████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||
# ███████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████     █████████
# █████         █████         █████         █████         █████         █████         █████         █████         █████         █████         █████         █████
# |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||         |||||
# |||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||     |||||||||
# |||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||█████|||||||||███
# |||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████████|||||█████

def printMapGraphic():
    shades = ['|','█',' ']
    shadeIndex = 0
    rows2Print = 12
    rowLength = 120
    printOut = []
    for line in range(rows2Print):
        shadeIndex += 1
        shade1=shades[(shadeIndex + 1) % 3]
        shade2=shades[shadeIndex % 3]
        printOut.append (''.join([shade1*5 + shade2*9 for n in range(int(rowLength / 12) + 1)]) + shade1*5 + shade2*5)
        printOut.append (shade1*7 + ''.join([shade2*5 + shade1*9 for n in range(int(rowLength / 12) + 1)]) + shade2*3)
        shadeIndex += 1
        shade1=shades[shadeIndex % 3]
        shade2=shades[(shadeIndex + 1) % 3]
        printOut.append (shade1*7 + ''.join([shade2*5 + shade1*9 for n in range(int(rowLength / 12) + 1)]) + shade2*3)
        printOut.append (''.join([shade1*5 + shade2*9 for n in range(int(rowLength / 12) + 1)]) + shade1*5 + shade2*5)
    print(*printOut, sep='\n')


